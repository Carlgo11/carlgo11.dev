<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="fonts/icons.min.css">
  <link rel="icon" href="https://carlgo11.dev/profile.png/64" type="image/png" sizes="64x64">
  <link rel="manifest" href="/manifest.json">
  <title>Carlgo11</title>
</head>
<body>
<main>
  <img class="profile-picture" src="https://carlgo11.dev/profile.png/112" alt="Carlgo11" loading="lazy" aria-hidden="true">

  <h1>Carlgo11</h1>

  <a role="button" href="https://Carlgo11.com" rel="me">
    <span class="blog">Blog</span>
  </a>

  <a role="button" href="https://github.com/Carlgo11" rel="me">
    <span class="github">GitHub</span>
  </a>

  <a role="button" href="https://twitter.com/Carlgo11" rel="me">
    <span class="twitter">Twitter</span>
  </a>

  <a role="button" href="https://infosec.exchange/@Carlgo11" rel="me">
    <span class="mastodon">Mastodon</span>
  </a>

  <a role="button" href="https://bsky.app/profile/carlgo11.dev" rel="me">
    <span class="bluesky">Bluesky</span>
  </a>

  <a role="button" href="https://reddit.com/u/carlgo11" rel="me">
    <span class="reddit">Reddit</span>
  </a>

  <a role="button" href="https://keybase.io/carlgo11" rel="me">
    <span class="keybase">Keybase</span>
  </a>

  <a role="button" id="imessage" href="#imessage-fpr">
    <span class="imessage">iMessage Key</span>
  </a>
  <dialog>
    <code id="imessage-fpr">{{imessage_fpr}}</code>
  </dialog>
</main>
<script type="application/javascript">
    const imessage_fpr = document.getElementById('imessage-fpr');
    const dialog = document.querySelector('dialog');
    const closeDialogOnOutsideClickOnce = (event) => {
        if (dialog === event.target) {
            dialog.close();
            document.body.removeEventListener('click', closeDialogOnOutsideClickOnce);
        }
    }

    document.getElementById('imessage').addEventListener('click', () => {
        dialog.showModal()
        setTimeout(() => {
            document.body.addEventListener('click', closeDialogOnOutsideClickOnce);
        }, 0);
      }
    )

    imessage_fpr.addEventListener('click', async () => {
        try {
            await navigator.clipboard.writeText(imessage_fpr.innerText)
        } catch (e) {
            console.error('Failed to copy: ', e);
        }
    })
</script>
</body>
</html>